{% extends "memopolis/base.html" %}
{% block content %}
<div class="container results">
    <div class="chart">
        <canvas id="bar-chart" width="800" height="450"></canvas>
    </div>
    <div class="text">
        <div class="container center">
            <h1>Top 5</h1>
        </div>
        {% for meme in memes %}
        <div class="container border m-3 mobilewidth">
            <div>
                <a href="{% url 'meme-detail' meme.id %}">{{ meme.title }}</a>
            </div>
            <div>
                <a>Punkty: </a>
                <a><span class="green">{{ meme.num_vote_up }}</span></a>
            </div>
        </div>
        {% endfor %}
        <div class="container border m-3 mobilewidth">
            <h1>Razem: <span class="green">{{ like_sum }}</span></h1>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

<script>
    const title_data = {{ js_meme_titles | safe }};

    const like_data = {{ js_meme_likes | safe }};

    new Chart(document.getElementById("bar-chart"), {
        type: 'bar',
        data: {
        labels: title_data,
        datasets: [
            {
            label: "Punkty",
            backgroundColor: "rgb(91, 223, 91)",
            data: like_data
            }
        ]
        },
        options: {
        legend: { display: false },
        title: {
            display: true,
            text: 'Twoje punkty'
        }
        }
    });

</script>

{% endblock content %}

